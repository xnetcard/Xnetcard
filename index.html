<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>College ID Card Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .id-card {
      width: 340px;
      height: 500px;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      background: #fff;
      padding: 18px;
      box-sizing: border-box;
      font-family: "Inter", sans-serif;
    }
    .photo-box {
      width: 100px;
      height: 120px;
      border: 2px solid #ddd;
      border-radius: 6px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f9fafb;
    }
    .vertical-session {
      position: absolute;
      right: -26px;
      top: 60px;
      writing-mode: vertical-rl;
      transform: rotate(180deg);
      background: #047857;
      color: white;
      padding: 6px;
      border-radius: 6px 0 0 6px;
      font-weight: bold;
    }
    @media print { .no-print { display:none } }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-4">

  <div class="bg-white p-6 rounded-xl shadow-md w-full max-w-md">
    <h1 class="text-2xl font-semibold text-center mb-4">Student ID Card Form</h1>
    <form id="idForm" class="space-y-3">
      <input id="studentName" placeholder="Full Name" class="w-full border rounded px-3 py-2" required />
      <input type="date" id="dob" class="w-full border rounded px-3 py-2" required />
      <input id="fatherName" placeholder="Father's Name" class="w-full border rounded px-3 py-2" required />
      <input id="address" placeholder="Address" class="w-full border rounded px-3 py-2" required />
      <input id="mobile" placeholder="Mobile Number" class="w-full border rounded px-3 py-2" required />
      <input type="file" id="photoInput" accept="image/*" class="w-full border rounded px-3 py-2" required />
      <button type="button" id="generateBtn" class="w-full bg-green-600 text-white py-2 rounded mt-2">Generate ID Card</button>
    </form>
  </div>

  <!-- Preview -->
  <div id="previewSection" class="hidden flex flex-col items-center mt-6">
    <div id="idCard" class="id-card relative">
      <div class="vertical-session" id="previewSession">Session 2024‚Äì25</div>
      <div class="flex items-center gap-3 mb-3">
        <div class="w-12 h-12 bg-green-600 text-white flex items-center justify-center rounded text-lg font-bold">G</div>
        <div>
          <div class="text-lg font-bold text-green-700" id="collegeName">Greenfield College of Arts & Science</div>
          <div class="text-xs text-gray-600" id="collegeReg">Reg. No: GFA/2012/001</div>
          <div class="text-xs text-gray-600" id="collegeAddr">12 Campus Road, Cityname, State - 123456</div>
        </div>
      </div>

      <div class="flex gap-3 mb-3">
        <div class="photo-box" id="previewPhoto">Photo</div>
        <div class="flex-1 text-sm">
          <div><b>Name:</b> <span id="previewName">‚Äî</span></div>
          <div><b>Adm. No.:</b> <span id="previewAdm"></span></div>
          <div><b>DOB:</b> <span id="previewDob"></span></div>
          <div><b>F. Name:</b> <span id="previewFname"></span></div>
          <div><b>Mob.:</b> <span id="previewMob"></span></div>
        </div>
      </div>

      <div class="text-xs text-gray-700 mb-4">
        <b>Address:</b> <span id="previewAddr"></span>
      </div>

      <div class="mt-6 flex items-center justify-between">
        <div>
          <svg width="100" height="40" viewBox="0 0 200 80"><path d="M4 60 C50 10, 150 100, 196 40" stroke="#000" fill="none" stroke-width="3" stroke-linecap="round"/></svg>
          <div class="text-xs font-semibold text-center">Principal</div>
        </div>
        <div class="text-xs text-right">
          <div>üìû (012) 345-6789</div>
          <div>üåê www.greenfieldcollege.edu</div>
        </div>
      </div>
    </div>

    <div class="flex gap-3 mt-4 no-print">
      <button id="downloadPNG" class="bg-blue-600 text-white px-4 py-2 rounded">Download Image</button>
      <button id="downloadPDF" class="bg-red-600 text-white px-4 py-2 rounded">Download PDF</button>
      <button onclick="location.reload()" class="bg-gray-200 px-4 py-2 rounded">Create New</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const el=id=>document.getElementById(id);
    const pad=n=>n.toString().padStart(4,'0');
    const genAdm=()=>`AD-${new Date().getFullYear()}-${pad(Math.floor(Math.random()*9999))}`;
    el('previewAdm').textContent=genAdm();

    el('generateBtn').onclick=()=>{
      const name=el('studentName').value.trim();
      if(!name)return alert('Please fill all details.');
      el('previewName').textContent=name;
      el('previewDob').textContent=new Date(el('dob').value).toLocaleDateString();
      el('previewFname').textContent=el('fatherName').value;
      el('previewMob').textContent=el('mobile').value;
      el('previewAddr').textContent=el('address').value;
      const file=el('photoInput').files[0];
      if(file){
        const url=URL.createObjectURL(file);
        el('previewPhoto').innerHTML=`<img src="${url}" style="width:100%;height:100%;object-fit:cover">`;
      }
      document.querySelector('.bg-white').classList.add('hidden');
      el('previewSection').classList.remove('hidden');
    };

    el('downloadPNG').onclick=()=>{html2canvas(el('idCard'),{scale:2}).then(c=>{const a=document.createElement('a');a.href=c.toDataURL();a.download='idcard.png';a.click();});};
    el('downloadPDF').onclick=async()=>{const c=await html2canvas(el('idCard'),{scale:2});const i=c.toDataURL('image/png');const{jsPDF}=window.jspdf;const p=new jsPDF({unit:'px',format:[c.width,c.height]});p.addImage(i,'PNG',0,0,c.width,c.height);p.save('idcard.pdf');};
  </script>
</body>
</html>
